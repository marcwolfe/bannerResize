/*!
 * VERSION: 0.4.4
 * DATE: 2018-03-03
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017 Christopher C. Moody
 *
 *	Permission is hereby granted, free of charge, to any person obtaining a copy of
 *	this software and associated documentation files (the "Software"), to deal in the
 *	Software without restriction, including without limitation the rights to use, copy,
 *	modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *	and to permit persons to whom the Software is furnished to do so, subject to the
 *	following conditions:
 *
 *	The above copyright notice and this permission notice shall be included in all
 *	copies or substantial portions of the Software.
 *
 *	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *	INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *	PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *	OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *	SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(global,className){var _instances={},_count=-1,mkr=function(options){var id=++_count;this._elements=[],this._states={},this._count=0,this._tag="mkr-"+id+"-index",(options=options||{}).tmln=options.tmln||{},this._tmln=new TimelineMax(options.tmln),delete options.tmln;var parent=mkr.getDefault(options,"parent",document.body);delete options.parent,"string"==typeof parent&&(parent=mkr.query(parent)),this._preload=options.preload,delete options.preload,this._images=[],this._loadCallback=null,this._loadContext=null;var _loadedImages=0;mkr.setDefault(options,"attr",{});var classes="mkr-container mkr-"+id;"class"in options.attr?options.attr.class+=" "+classes:options.attr.class=classes,this.container=this.create("div",options,parent,!0),_instances[id]=this;var _imageLoaded=function(){_loadedImages++;var self=_instances[id];_loadedImages==self._images.length&&(self._loadCallback&&self._loadCallback.apply(self._loadContext),_preload=!1)};Object.defineProperty(this,"id",{get:function(){return id}}),this.load=function(callback,context){this._loadCallback=callback,this._loadContext=context;var i=this._images.length;if(i<=0)this._loadCallback.apply(this._loadContext);else{for(;i--;)this._images[i].img.onload=_imageLoaded;for(i=this._images.length;i--;)this._images[i].img.src=this._images[i].src}}};mkr.makeDC=function(width,height,options){options=options||{},mkr.setDefault(options,"border",{}),mkr.setDefault(options.border,"css",{}),mkr.setDefault(options.border.css,"top",0),mkr.setDefault(options.border.css,"left",0),mkr.setDefault(options.border.css,"zIndex",10),mkr.setDefault(options.border.css,"position","absolute"),mkr.setDefault(options.border.css,"pointerEvents","none"),mkr.setDefault(options.border.css,"borderWidth","1px"),mkr.setDefault(options.border.css,"borderStyle","solid"),mkr.setDefault(options.border.css,"borderColor","#666666");var borderWidth=mkr.unitless(options.border.css.borderWidth);mkr.setDefault(options.border.css,"width",width-2*borderWidth),mkr.setDefault(options.border.css,"height",height-2*borderWidth),mkr.setDefault(options.border,"attr",{});"class"in options.border.attr?options.border.attr.class+=" mkr-border":options.border.attr.class="mkr-border";var border=document.createElement("div");TweenMax.set(border,options.border),delete options.border,mkr.setDefault(options,"attr",{}),mkr.setDefault(options,"css",{}),mkr.setDefault(options.css,"width",width),mkr.setDefault(options.css,"height",height),mkr.setDefault(options.css,"top","0px"),mkr.setDefault(options.css,"left","0px"),mkr.setDefault(options.css,"zIndex",1),mkr.setDefault(options.css,"overflow","hidden");var dc=new mkr(options);return dc.border=border,dc.container.appendChild(dc.border),dc},Object.defineProperty(mkr.prototype,"tmln",{get:function(){return this._tmln}}),Object.defineProperty(mkr.prototype,"width",{get:function(){return this.container.offsetWidth},set:function(value){this.container.offsetWidth=value}}),Object.defineProperty(mkr.prototype,"height",{get:function(){return this.container.offsetHeight},set:function(value){this.container.offsetHeight=value}}),mkr.prototype.construct=function(type,options,parent){return options=options||{},parent=mkr.default(parent,this.container),mkr.construct(type,options,parent,this)},mkr.prototype.clone=function(target,options,cloneOpts,parent,index){return parent=parent||this.container,mkr.clone(target,options,cloneOpts,parent,index)},mkr.prototype.create=function(type,options,parent,index){var el;if(options=options||{},parent=mkr.default(parent,this.container),"img"===type&&this._preload&&options.attr&&options.attr.src){var img={src:options.attr.src};return delete options.attr.src,el=mkr.create(type,options,parent,index),img.img=el,this._images.push(img),el}return mkr.create(type,options,parent,index)},mkr.prototype.batch=function(type,options,num,parent){for(var elements=[],n=num;n--;)elements.push(this.create(type,options,parent));return elements},mkr.prototype.kill=function(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.container),TweenMax.killChildTweensOf(this.container),mkr.off(".mkr-"+this.id+" *"),mkr.remove(this.container)},mkr.each=function(target,callback,context){var targets;null!=target&&void 0!==target&&(targets="string"==typeof target?mkr.queryAll(target):Array.isArray(target)?target:[target],forEach(targets,callback,context))};var forEach=function(arrayLike,callback,context){for(var i=0;i<arrayLike.length;i++)callback.call(context,arrayLike[i],i)};mkr.on=function(target,type,callback,context,priority){mkr.each(target,function(el){var cxt=mkr.default(context,el);mkr._triggerMatrix.add(el,type,callback,cxt,priority)})},mkr.once=function(target,type,callback,context,priority){mkr.each(target,function(el){var cxt=mkr.default(context,el);mkr._triggerMatrix.addOnce(el,type,callback,cxt,priority)})},mkr.off=function(target,type,callback,context){var func;func=void 0===type?mkr._triggerMatrix.delete.bind(mkr._triggerMatrix):void 0===callback?mkr._triggerMatrix.removeAll.bind(mkr._triggerMatrix):mkr._triggerMatrix.remove.bind(mkr._triggerMatrix),mkr.each(target,function(el){var cxt=mkr.default(context,el);func(el,type,callback,cxt)})},mkr.clearListeners=function(){mkr._triggerMatrix.clear()},mkr.reveal=function(target,options,parentOpts){options=options||{},mkr.setDefault(options,"overflowY","visible"),mkr.setDefault(options,"height","auto"),TweenMax.set(target,options),parentOpts=parentOpts||{},mkr.setDefault(parentOpts,"overflowY","visible"),mkr.each(target,function(el){var parent=el.parentNode;for(el.parentNode;parent&&parent!==window.document;)parentOpts.height=el.scrollHeight+(el._gsTransform?el._gsTransform.y:0),TweenMax.set(parent,parentOpts),parent,parent=parent.parentNode})},mkr.scroll=function(target,speed,options){options=options||{},mkr.setDefault(options,"scrollTo","max"),mkr.setDefault(options,"ease",Power0.easeNone),speed=mkr.default(speed,14);var tweens=[];return mkr.each(target,function(el){var scrollTime=(el.scrollHeight-el.clientHeight-el.scrollTop)/speed;tweens.push(TweenMax.to(el,scrollTime,options))}),tweens},mkr.extend=function(baseObj){return"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),Object.create(baseObj)},mkr.query=function(selectors,baseElement){return(baseElement=baseElement||document).querySelector(selectors)},mkr.queryAll=function(selectors,baseElement){return(baseElement=baseElement||document).querySelectorAll(selectors)},mkr.construct=function(type,options,parent){return type in mkr._constructs?(mkr.setDefault(options,"parent",parent),new mkr._constructs[type](options)):(console.warn(type,"not found!"),null)},mkr._constructs={},Object.defineProperty(mkr,"constructs",{get:function(){return mkr._constructs}}),mkr.clone=function(target,options,cloneOpts,parent,index){options=options||{},options=mkr.merge(options,mkr.defaults),cloneOpts=cloneOpts||{},mkr.setDefault(cloneOpts,"children",!0);var clone,clones=[];return mkr.each(target,function(el){delete(clone=el.cloneNode(cloneOpts.children)).id,TweenLite.set(clone,options),mkr.add(clone,parent,index),clones.push(clone)}),clones.length>1?clones:clones[0]},mkr.create=function(type,options,parent,index){var t=type.toLowerCase();options=options||{},options=mkr.merge(options,mkr.defaults),"string"==typeof(parent=mkr.default(parent,null))&&(parent=mkr.query(parent));var element;return["svg","defs","use","image","g","mask","clippath","lineargradient","radialgradient","stop","text","rect","circle","ellipse","line","polyline","polygon","path"].indexOf(t)>=0?(element=document.createElementNS("http://www.w3.org/2000/svg",type),"xlink:href"in options.attr&&(element.setAttributeNS("http://www.w3.org/1999/xlink","href",options.attr["xlink:href"]),delete options.attr["xlink:href"])):element=document.createElement(type),TweenMax.set(element,options),mkr.add(element,parent,index),element},mkr.add=function(target,parent,index){parent=mkr.default(parent,document.body);var targets=[];return parent?("string"==typeof parent&&(parent=mkr.query(parent)),(index=mkr.default(index,parent.childNodes.length))<0&&(index=parent.childNodes.length+index),mkr.each(target,function(el){parent.insertBefore(el,parent.childNodes[index]),targets.push(el)})):mkr.each(target,function(el){targets.push(el)}),targets.length>1?targets:targets[0]},mkr.remove=function(target){var targets=[];return mkr.each(target,function(el){targets.push(el.parentNode.removeChild(el))}),targets.length>1?targets:targets[0]},mkr.default=function(value,fallback){return void 0===value?fallback:value},mkr.getDefault=function(target,key,value){return mkr.default(target[key],value)},mkr.setDefault=function(target,key,value){return target[key]=mkr.default(target[key],value),target[key]};var style,SignalManager,scope,matrix;mkr.addRule=function(selector,styles,index){index=void 0===index?mkr.styles.cssRules.length:index;var rules=selector+"{}",n=-1;try{n=mkr.styles.insertRule(rules,index);var rule=mkr.styles.cssRules[n].style;TweenMax.set(rule,{cssRule:styles})}catch(e){console.warn(e)}return n},mkr.removeRule=function(selector){var index=mkr.findRule(selector);index>-1&&mkr.styles.deleteRule(index)},mkr.hasClass=function(target,className){return"string"==typeof target&&(target=mkr.query(target)),!!target&&target.className.split(" ").indexOf(className)},mkr.deleteRule=function(index){mkr.styles.deleteRule(index)},mkr.findRule=function(selector){for(var len=mkr.styles.cssRules.length,i=0;i<len;i++)if(selector===mkr.styles.cssRules[i].selectorText)return i;return-1},mkr.getRule=function(selector){return CSSRulePlugin.getRule(selector)},mkr.setRule=function(selector,styles){var rule=CSSRulePlugin.getRule(selector);rule&&TweenMax.set(rule,{cssRule:styles})},mkr.merge=function(src,merger,overwrite){overwrite=mkr.default(overwrite,!1);var res=mkr.copy(src);for(var key in merger)if(void 0!==src[key])if("object"==typeof src[key])"object"==typeof merger[key]?res[key]=mkr.merge(src[key],mkr.copy(merger[key]),overwrite):overwrite&&(res[key]=merger[key]);else{if(!overwrite)continue;res[key]=merger[key]}else res[key]=merger[key];return res},mkr.copy=function(src){return JSON.parse(JSON.stringify(src))},mkr._units=/(\-?\d+(\.\d+)?)([A-z%]*)/gi,mkr.unit=function(value){return String(value).replace(mkr._units,"$3")},mkr.unitless=function(value){return Number(String(value).replace(mkr._units,"$1"))},mkr.unitize=function(value,unit,override){if(unit=mkr.default(unit,"px"),override=mkr.default(override,!0))return String(value).replace(mkr._units,"$1"+unit);var parts=String(value).replace(mkr._units,"$1 $3").split(" ");return unit=parts[1]&&parts[1].length>0?parts[1]:unit,parts[0]+unit},mkr.setPolyClipPath=function(target,points,unit){if(!([null,void 0].indexOf(target)<0||[null,void 0].indexOf(points)<0)){unit=void 0===unit?"%":unit;for(var clipPath="polygon(",len=points.length,i=0;i<len;i++)clipPath+=points[i]+unit,i<len-1&&(clipPath+=i%2==0?" ":",");clipPath+=")",TweenMax.set(target,{clipPath:clipPath})}},mkr.distance=function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},mkr.rotation=function(x1,y1,x2,y2){var dx=x2-x1,dy=y2-y1;return Math.atan2(dy,dx)},mkr.angle=function(x1,y1,x2,y2){return mkr.rotation(x1,y1,x2,y2)*mkr.DEG},mkr.fix=function(n,decimals){return decimals=mkr.default(decimals,3),Number(n.toFixed(decimals))},mkr.randomRange=function(min,max){return Math.floor(Math.random()*(max-min+.99))+min},mkr.RAD=Math.PI/180,mkr.DEG=180/Math.PI,Object.defineProperty(mkr,"styles",{get:function(){return mkr._styles}}),mkr._styles=((style=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet),Object.defineProperty(mkr,"rules",{get:function(){return mkr.styles.cssRules}}),Object.defineProperty(mkr,"defaults",{get:function(){return mkr._defaults}}),mkr._defaults={force3d:!0,css:{position:"absolute"},attr:{}},SignalManager=function(options){var _signals={};this.register=function(signalId){signalId in _signals||(_signals[signalId]=new signals.Signal)},this.add=function(signalId,listener,context,priority,isOnce){return signalId in _signals||(_signals[signalId]=new signals.Signal),context=context||null,priority=priority||0,isOnce=void 0===isOnce,_signals[signalId].add(listener,context,priority)},this.addOnce=function(signalId,listener,context,priority){return signalId in _signals||(_signals[signalId]=new signals.Signal),context=context||null,priority=priority||0,_signals[signalId].addOnce(listener,context,priority)},this.dispatch=function(signalId,params){signalId in _signals&&_signals[signalId].dispatch.apply(null,Array.prototype.slice.call(arguments,1))},this.dispose=function(signalId){signalId in _signals&&(_signals[signalId].dispose(),delete _signals[signalId])},this.forget=function(signalId){signalId in _signals&&_signals[signalId].forget()},this.getNumListeners=function(signalId){return signalId in _signals?_signals[signalId].getNumListeners():0},this.halt=function(signalId){signalId in _signals&&_signals[signalId].halt()},this.has=function(signalId,listener,context){return signalId in _signals&&(context=context||null,_signals[signalId].has(listener,context))},this.remove=function(signalId,listener,context){signalId in _signals&&(context=context||null,_signals[signalId].remove(listener,context))},this.removeAll=function(signalId){signalId in _signals&&_signals[signalId].removeAll()},this.destroy=function(){for(sigId in _signals)_signals[sigId].dispose(),delete _signals[sigId]}},mkr.SignalManager=SignalManager,function(global,className){var _instances={},_count=-1,_uid=-1,map=function(){Object.defineProperty(this,"_id",{enumerable:!1,value:++_count}),this._dict={},this._keys={},_instances[this._id]=this};map.prototype={get:function(key){return"string"==typeof key?this._dict[key]:void 0!==key._mkrmapid?this._dict[key._mkrmapid]:void 0},set:function(key,value){return"string"==typeof key?this._dict[key]=value:(void 0===key._mkrmapid&&Object.defineProperty(key,"_mkrmapid",{enumerable:!1,value:++_uid,configurable:!0}),this._keys[key._mkrmapid]=key,this._dict[key._mkrmapid]=value),this},has:function(key){return"string"==typeof key?key in this._dict:void 0!==key._mkrmapid&&key._mkrmapid in this._dict},delete:function(key){var flag=this.has(key);return"string"==typeof key&&delete this._dict[key],void 0!==key._mkrmapid&&(delete this._keys[key._mkrmapid],delete this._dict[key._mkrmapid],delete key._mkrmapid,flag)},clear:function(){for(var key in this._dict)key in this._keys?this.delete(this._keys[key]):this.delete(key)},forEach:function(callback,context){for(var key in this._dict){var target=key in this._keys?this._keys[key]:key;callback.apply(context,[this._dict[key],target,this])}}},global.map=map}(mkr),matrix=function(options){this._mngrs=new mkr.map,this.add=function(target,type,listener,context,priority,isOnce){isOnce=void 0!==isOnce&&isOnce,this._mngrs.has(target)||this._mngrs.set(target,{signals:new scope.SignalManager,triggers:{}});var trigger,mngr=this._mngrs.get(target);mngr.triggers.hasOwnProperty(type)&&(trigger=mngr.triggers[type],target.removeEventListener(type,trigger),delete mngr.triggers[type]),isOnce?(trigger=function(e){mngr.signals.dispatch(type,e),0==mngr.signals.getNumListeners(type)&&(target.removeEventListener(type,trigger),delete mngr.triggers[type])},mngr.signals.addOnce(type,listener,context,priority)):(trigger=function(e){mngr.signals.dispatch(type,e)},mngr.signals.add(type,listener,context,priority)),target.addEventListener(type,trigger),mngr.triggers[type]=trigger},this.addOnce=function(target,type,listener,context,priority){this.add(target,type,listener,context,priority,!0)},this.remove=function(target,type,listener,context){if(this._mngrs.has(target)){var mngr=this._mngrs.get(target);if(mngr.triggers.hasOwnProperty(type)&&mngr.signals.has(type,listener,context)&&(mngr.signals.remove(type,listener,context),0==mngr.signals.getNumListeners(type))){var trigger=mngr.triggers[type];target.removeEventListener(type,trigger),delete mngr.triggers[type]}}},this.removeAll=function(target,type){if(this._mngrs.has(target)){var mngr=this._mngrs.get(target);if(mngr.triggers.hasOwnProperty(type)){mngr.signals.removeAll(type);var trigger=mngr.triggers[type];target.removeEventListener(type,trigger),delete mngr.triggers[type]}}},this.delete=function(target){if(this._mngrs.has(target)){var mngr=this._mngrs.get(target);for(var type in mngr.triggers){var trigger=mngr.triggers[type];target.removeEventListener(type,trigger),delete mngr.triggers[type]}mngr.signals.destroy(),this._mngrs.delete(target)}},this.clear=function(){var self=this;this._mngrs.forEach(function(value,target,map){self.delete(target)})}},(scope=mkr).TriggerMatrix=matrix,mkr._triggerMatrix=new mkr.TriggerMatrix,Object.defineProperty(mkr,"VERSION",{get:function(){return"0.4.4"}}),"function"==typeof define&&define.amd?define(function(){return mkr}):"undefined"!=typeof module&&module.exports?module.exports=mkr:global.mkr=mkr}(this),
/*!JS Signals <http://millermedeiros.github.com/js-signals/> @license Released under the MIT license Author: Miller MedeirosVersion: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)*/
function(i){function h(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function g(a,b){if("function"!=typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function e(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}h.prototype={active:!0,params:null,execute:function(a){var b;return this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,c,d){var e=this._indexOfListener(a,c);if(-1!==e){if((a=this._bindings[e]).isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.")}else a=new h(this,a,b,c,d),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(a){for(var b=this._bindings.length;--b,this._bindings[b]&&a._priority<=this._bindings[b]._priority;);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var d,c=this._bindings.length;c--;)if((d=this._bindings[c])._listener===a&&d.context===b)return c;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,c){return g(a,"add"),this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return g(a,"addOnce"),this._registerListener(a,!0,b,c)},remove:function(a,b){g(a,"remove");var c=this._indexOfListener(a,b);return-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var d,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c)for(d=this._bindings.slice(),this._shouldPropagate=!0;d[--c]&&this._shouldPropagate&&!1!==d[c].execute(b););}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var f=e;f.Signal=e,"function"==typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof module&&module.exports?module.exports=f:i.signals=f}(this);